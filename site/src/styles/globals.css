/* Import base Tailwind styles and load the typography plugin */
@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Enable class-based dark mode. Add/remove 'dark' class on <html> or <body> to toggle. */
@custom-variant dark (&:where(.dark, .dark *));

/* Define base CSS variables for color tokens.
  These will be swapped based on the .dark class.
*/
:root {
  /* Light Mode Values */
  --page-bg-val: 255 255 255; /* RGB for potential use with opacity */
  --text-default-val: 23 23 23;
  --text-subtle-val: 82 82 82;
  --surface-bg-val: 249 250 251; /* For cards, etc. (gray-50 equivalent) */

  /* Direct hex values for easier use */
  --page-background: #ffffff;
  --text-default: #171717; /* Neutral 900 */
  --text-subtle: #525252; /* Neutral 600 */
  --surface-background: #f9fafb; /* Gray 50 */
  --link-default: #2563eb; /* Blue 600 */
  --link-hover: #1d4ed8; /* Blue 700 */

  --selection-background: rgba(
    59,
    130,
    246,
    0.3
  ); /* Equivalent to blue-500 with 30% opacity */
  --selection-text: inherit; /* Use the element's own text color by default */
}

.dark:root {
  /* When .dark class is present */
  /* Dark Mode Values */
  --page-bg-val: 10 10 10;
  --text-default-val: 237 237 237;
  --text-subtle-val: 163 163 163;
  --surface-bg-val: 31 31 31; /* ~Neutral 800/900 adjusted */

  /* Direct hex values */
  --page-background: #0a0a0a; /* Neutral 950 */
  --text-default: #ededed; /* Neutral 100 */
  --text-subtle: #a3a3a3; /* Neutral 400 */
  --surface-background: #1f1f1f; /* Neutral 900 (Adjusted darker) */
  --link-default: #60a5fa; /* Blue 400 */
  --link-hover: #93c5fd; /* Blue 300 */

  --selection-background: rgba(
    96,
    165,
    250,
    0.4
  ); /* Equivalent to blue-400 with 40% opacity for dark mode */
  --selection-text: inherit;
}

/* Register our CSS variables with Tailwind's theme system.
  This allows using theme('colors.page-background') or classes like bg-page-background.
  Also, override typography plugin variables here.
*/
@theme {
  /* Define color tokens for Tailwind */
  --color-page-background: var(--page-background);
  --color-text-default: var(--text-default);
  --color-text-subtle: var(--text-subtle);
  --color-surface-background: var(--surface-background);
  --color-link-default: var(--link-default);
  --color-link-hover: var(--link-hover);

  /* Define font families (assumes --font-geist-sans & --font-geist-mono are loaded, e.g., via next/font in layout.tsx) */
  --font-sans: var(--font-inter); /* Use Inter for sans-serif */
  --font-mono: var(--font-fira-code); /* Use Fira Code for monospace */

  /*
    Customize @tailwindcss/typography plugin variables.
    These variables are used by the 'prose' classes.
    We tie them to our theme's CSS variables.
  */
  /* Light Prose Theme Variables */
  --tw-prose-body: var(--text-default);
  --tw-prose-headings: var(--text-default);
  --tw-prose-lead: var(--text-subtle);
  --tw-prose-links: var(--link-default);
  --tw-prose-bold: var(--text-default);
  --tw-prose-counters: var(--text-subtle);
  --tw-prose-bullets: var(--text-subtle);
  --tw-prose-hr: var(--surface-background);
  --tw-prose-quotes: var(--text-default);
  --tw-prose-quote-borders: var(
    --link-default
  ); /* Example: use link color for quote border */
  --tw-prose-captions: var(--text-subtle);
  --tw-prose-code: var(--text-default); /* Inline code text */
  --tw-prose-pre-code: var(--text-default); /* Code within <pre> blocks */
  --tw-prose-pre-bg: var(--surface-background); /* Background of <pre> blocks */
  --tw-prose-th-borders: var(--text-subtle);
  --tw-prose-td-borders: var(--surface-background);
  /* For a more paper-like feel for code blocks in light mode, you might use a slightly different bg */
  /* --tw-prose-pre-bg: #f3f4f6; /* gray-100 */

  /* Dark Prose Theme Variables (for 'prose-invert' class) */
  --tw-prose-invert-body: var(
    --text-default
  ); /* text-default is already dark-mode aware */
  --tw-prose-invert-headings: var(--text-default);
  --tw-prose-invert-lead: var(--text-subtle);
  --tw-prose-invert-links: var(
    --link-default
  ); /* link-default is already dark-mode aware */
  --tw-prose-invert-bold: var(--text-default);
  --tw-prose-invert-counters: var(--text-subtle);
  --tw-prose-invert-bullets: var(--text-subtle);
  --tw-prose-invert-hr: var(--surface-background);
  --tw-prose-invert-quotes: var(--text-default);
  --tw-prose-invert-quote-borders: var(--link-default);
  --tw-prose-invert-captions: var(--text-subtle);
  --tw-prose-invert-code: var(--text-default);
  --tw-prose-invert-pre-code: var(--text-default);
  --tw-prose-invert-pre-bg: var(--surface-background);
  --tw-prose-invert-th-borders: var(--text-subtle);
  --tw-prose-invert-td-borders: var(--surface-background);
}

/* Base body styles */
body {
  background-color: theme("colors.page-background");
  color: theme("colors.text-default");
  font-family: theme("fontFamily.sans");
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

*:focus-visible {
  outline: 2px solid theme("colors.link-default"); /* Or another prominent color from your theme */
  outline-offset: 2px;
  border-radius: 2px; /* Optional: slightly rounded focus outline */
}

/* For dark mode, you might want a slightly different focus color if the default link color doesn't contrast well */
.dark *:focus-visible {
  outline-color: theme(
    "colors.link-default"
  ); /* link-default is already dark mode aware from our theme setup */
}
@layer utilities {
  .max-w-readable {
    max-width: 70ch; /* Adjust '70ch' to your preferred readable width.
                        'ch' is a unit relative to the width of the '0' (zero) character.
                        Common values range from 65ch to 80ch.
                     */
  }
}

/* Custom Text Selection Styles */
::selection {
  background-color: var(--selection-background);
  color: var(--selection-text);
}

/* Firefox requires a separate rule for `::-moz-selection` */
::-moz-selection {
  background-color: var(--selection-background);
  color: var(--selection-text);
}
